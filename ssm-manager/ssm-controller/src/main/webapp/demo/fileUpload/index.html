<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./layui/css/layui.css" media="all">
</head>

<body>
    <div class="layui-upload">
        <button type="button" class="layui-btn" id="test2">多图片上传</button>
        <blockquote class="layui-elem-quote layui-quote-nm" style="margin-top: 10px;">
            预览图：
            <div class="layui-upload-list" id="demo2"></div>
        </blockquote>
    </div>
    <script src="./layui/layui.js"></script>
    <script>
        layui.use(['jquery', 'upload', 'layer'], function () {

            var upload = layui.upload,
                $ = layui.jquery,
                layer = layui.layer;

            //执行实例
            var uploadInst = upload.render({

                //绑定元素
                elem: '#test2',
                //上传接口
                url: '/ssm-controller/fileUpload',
                multiple: true,
                before: function (obj) {

                    //预读本地文件示例，不支持ie8
                    obj.preview(function (index, file, result) {

                        $('#demo2').append('<img src="' + result + '" alt="' + file.name + '" class="layui-upload-img">')
                        
                    });

                },
                done: function (res) {

                    if (res.code === 1) {

                        layer.msg(res.msg);

                    } else if (res.code === 0) {

                        layer.msg(res.msg);

                    }

                },
                error: function () {

                    layer.msg("请求异常");

                }

            });

        });
    </script>
</body>

</html>